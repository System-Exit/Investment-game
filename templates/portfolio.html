{% extends "layout.html" %}
{% set active_page = "portfolio" %}
{% block content %}
<div id="index-body">
    {% include "messageblock.html" %}
    <div class="container">
        <h2>Currently Owned Shares</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Company</th>
                    <th>Industry</th>
                    <th>Price</th>
                    <th>Change %</th>
                    <th>Change $</th>
                    <th>Market Cap</th>
                    <th>Number Owned</th>
                </tr>
            </thead>
            <tbody>
            {% for share in usershares %}
            {% if share.quantity > 0 %}
                <tr>
                    <th scope="row">{{ share.issuerID }}</th>
                    <td>{{ share.abbrevname }}</td>
                    <td>{{ share.industrysector }}</td>
                    <td>{{ share.currentprice }}</td>
                    {% if share.daychangepercent >= 0 %}
                    <td class=text-success>{{share.daychangepercent}}</td>
                    <td class=text-success>{{ share.daychangeprice}}</td>
                    {% else %}
                    <td class=text-danger>{{share.daychangepercent}}</td>
                    <td class=text-danger>{{ share.daychangeprice}}</td>
                    {% endif %}
                    <td>{{share.marketcapitalisation}}</td>
                    <td>{{ share.quantity }}</td>
                    <td><button name="{{ share.issuerID }}" onclick="SetCompanyValue(this.name, 'buysharecode')" type="button" class="btn btn-success" data-toggle="modal" data-target="#buy-modal">Buy</button></td>
                    <td><button name="{{ share.issuerID }}" onclick="SetCompanyValue(this.name, 'sellsharecode')" type="button" class="btn btn-danger" data-toggle="modal" data-target="#sell-modal">Sell</button></td>
                </tr>
            {% endif %}
            {% endfor %}
            </tbody>
        </table>
        <h2>Previously Owned Shares</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Company</th>
                    <th>Industry</th>
                    <th>Price</th>
                    <th>Change %</th>
                    <th>Change $</th>
                    <th>Market Cap</th>
                    <th>Number Owned</th>
                </tr>
            </thead>
            <tbody>
            {% for share in usershares %}
            {% if share.quantity == 0 %}
                <tr>
                    <th scope="row">{{ share.issuerID }}</th>
                    <td>{{ share.abbrevname }}</td>
                    <td>{{ share.industrysector }}</td>
                    <td>{{ share.currentprice }}</td>
                    {% if share.daychangepercent >= 0 %}
                    <td class=text-success>{{share.daychangepercent}}</td>
                    <td class=text-success>{{ share.daychangeprice}}</td>
                    {% else %}
                    <td class=text-danger>{{share.daychangepercent}}</td>
                    <td class=text-danger>{{ share.daychangeprice}}</td>
                    {% endif %}
                    <td>{{share.marketcapitalisation}}</td>
                    <td>{{ share.quantity }}</td>
                    <td><button name="{{ share.issuerID }}" onclick="SetCompanyValue(this.name, 'buysharecode')" type="button" class="btn btn-success" data-toggle="modal" data-target="#buy-modal">Buy</button></td>
                    <td><button name="{{ share.issuerID }}" onclick="SetCompanyValue(this.name, 'sellsharecode')" type="button" class="btn btn-danger" data-toggle="modal" data-target="#sell-modal">Sell</button></td>
                </tr>
            {% endif %}
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% include "sharemodals.html" %}
</div>
<script src="{{url_for('static', filename='scripts/script.js')}}"></script>
{% endblock %}